---
title: 'Service Reminder Webhook'
description: 'Receive notifications about due service reminders'
---

## Overview

The Service Reminder webhook notifies your system when a notification rule is triggered indicating that a service reminder is due for a patient. Oliver sends an HTTP POST request to your configured endpoint with a JSON payload containing the reminder details.

## Payload Structure

The webhook payload is sent as a JSON object with the following structure:

<ResponseField name="practice_id" type="string" required>
  Oliver's unique identifier for the veterinary practice.
</ResponseField>

<ResponseField name="practice_name" type="string" required>
  The name of the veterinary practice associated with the reminder.
</ResponseField>

<ResponseField name="client_id" type="string" required>
  Oliver's unique identifier for the client who should be notified.
</ResponseField>

<ResponseField name="remote_client_id" type="string">
  The unique identifier for the client in the PIMS, if applicable.
</ResponseField>

<ResponseField name="patient_id" type="string" required>
  Oliver's unique identifier for the patient (pet) who has services due.
</ResponseField>

<ResponseField name="remote_patient_id" type="string">
  The unique identifier for the patient in the PIMS, if applicable.
</ResponseField>

<ResponseField name="service_code_ids" type="array" required>
  An array of service code identifiers for the services that are due.
</ResponseField>

<ResponseField name="due_at" type="string" required>
  The date and time when the services are due, in ISO 8601 format.
</ResponseField>

## Example Payload

```json
{
  "practice_id": "pra_def456",
  "practice_name": "Happy Paws Veterinary Clinic",
  "client_id": "cli_abc123",
  "remote_client_id": "12345",
  "patient_id": "pat_xyz789",
  "remote_patient_id": "67890",
  "service_code_ids": ["svc_001", "svc_002"],
  "due_at": "2025-01-15T14:30:00Z"
}
```

## Verifying Webhook Signatures

To ensure that webhook requests are genuinely from Oliver and have not been tampered with, each request includes a signature in the `X-Webhook-Signature` header. You should verify this signature before processing the payload.

### Signature Verification Process

1. Extract the `X-Webhook-Signature` header from the request
2. Compute an HMAC-SHA256 hash of the raw request body using your webhook secret
3. Compare the computed signature with the one in the header

### Example Verification

```python
import hmac
import hashlib

def verify_webhook_signature(payload: bytes, signature: str, secret: str) -> bool:
    expected_signature = hmac.new(
        secret.encode('utf-8'),
        payload,
        hashlib.sha256
    ).hexdigest()
    return hmac.compare_digest(expected_signature, signature)
```

```javascript
const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(payload, 'utf-8')
    .digest('hex');
  return crypto.timingSafeEqual(
    Buffer.from(expectedSignature),
    Buffer.from(signature)
  );
}
```

<Warning>
  Always use constant-time comparison functions (like `hmac.compare_digest` in Python or `crypto.timingSafeEqual` in Node.js) to prevent timing attacks.
</Warning>

## Handling the Webhook

When receiving a service reminder webhook, your endpoint should:

1. Verify the webhook signature
2. Respond with a `200 OK` status code to acknowledge receipt
3. Process the reminder asynchronously if needed to avoid timeouts
4. Use the `client_id` and `patient_id` to look up contact information
5. Send appropriate reminder notifications to the client

<Note>
  If your endpoint fails to respond with a success status code, Oliver may retry the webhook delivery.
</Note>
